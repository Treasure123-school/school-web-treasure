I can't still see the profile image and nin data.

OH

io87wz
Assistant
just now
To resolve the issue where the profile image and National ID (NIN) data are not being displayed, ensure the code correctly fetches, processes, and renders this data. Below are the modifications and updates to ensure these fields are handled correctly in your .

Updated Code for 
import React, { useEffect, useState } from 'react';
import { useQuery } from 'react-query';
import { useAuth } from '@/lib/auth'; // Adjust this according to your project structure
import { useToast } from '@/hooks/use-toast';
import PortalLayout from '@/components/layout/PortalLayout';
import { Avatar, AvatarImage } from '@/components/ui/avatar';
import { Card, CardContent } from '@/components/ui/card';
export default function TeacherProfile() {
  const { user } = useAuth();
  const { toast } = useToast();
  const [profileData, setProfileData] = useState({});
  // Fetching teacher profile data
  const { data: teacherProfile, isLoading, error } = useQuery('/api/teacher/profile/me', {
    enabled: !!user,
  });
  useEffect(() => {
    if (teacherProfile) {
      const {
        firstName,
        lastName,
        email,
        phone,
        address,
        recoveryEmail,
        gender,
        dateOfBirth,
        nationalId,
        profileImageUrl // Ensure this is included
      } = teacherProfile;
      const newProfileData = {
        firstName,
        lastName,
        email,
        phone,
        address,
        recoveryEmail,
        gender,
        dateOfBirth,
        nationalId,
        profileImageUrl, // Add this for displaying the profile image
      };
      
      console.log('Profile Data:', newProfileData);
      setProfileData(newProfileData);
    }
  }, [teacherProfile]);
  if (isLoading) {
    return <div>Loading profile...</div>;
  }
  if (error) {
    toast({ title: "Error", description: "Failed to fetch profile data", variant: "destructive" });
    return <div>Error loading profile data.</div>;
  }
  return (
    <PortalLayout userRole="teacher" userName={profileData.firstName}>
      <Card>
        <CardContent>
          <h2>Profile Overview</h2>
          {profileData.profileImageUrl && (
            <Avatar>
              <AvatarImage src={profileData.profileImageUrl} alt="Profile" />
            </Avatar>
          )}
          <p>Full Name: {profileData.firstName} {profileData.lastName}</p>
          <p>Staff ID: {profileData.staffId || 'Not provided'}</p>
          <p>Email: {profileData.email || 'Not provided'}</p>
          <p>Phone: {profileData.phone || 'Not provided'}</p>
          <p>Gender: {profileData.gender || 'Not provided'}</p>
          <p>Date of Birth: {profileData.dateOfBirth || 'Not provided'}</p>
          <p>National ID: {profileData.nationalId || 'Not provided'}</p> {/* Ensure NIN is displayed */}
          <p>Address: {profileData.address || 'Not provided'}</p>
          <p>Recovery Email: {profileData.recoveryEmail || 'Not provided'}</p>
        </CardContent>
      </Card>
    </PortalLayout>
  );
}
Key Changes:
Inclusion of profileImageUrl: Make sure that the profileImageUrl is correctly included in the state management to display the profile image.
Rendering Logic: The paragraph for National ID is explicitly shown with a fallback for when it's not available, ensuring that the data appears correctly.
Profile Initialization: Ensure all relevant fields are correctly set and logged to facilitate debugging.
Final Steps:
Verify that the API /api/teacher/profile/me is returning the profileImageUrl and nationalId in the payload.
After applying the changes, navigate to the TeacherProfile in your browser to confirm that the profile image and National ID are now displayed correctly.
Please ensure that you've properly configured your API and data so that all necessary fields are available.

Assistant mode

basic
